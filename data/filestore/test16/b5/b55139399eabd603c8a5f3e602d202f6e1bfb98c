
/* /base/static/tests/test_ir_model_fields_translation.js */
odoo.define('@base/../tests/test_ir_model_fields_translation',async function(require){'use strict';let __exports={};"use strict";const tour=require("web_tour.tour");function checkLoginColumn(translation){return[tour.stepUtils.showAppsMenuItem(),{content:"Settings",trigger:'a[data-menu-xmlid="base.menu_administration"]',run:'click',},{content:"Open Users & Companies",trigger:'[data-menu-xmlid="base.menu_users"]',run:"click",},{content:"Open Users",trigger:'[data-menu-xmlid="base.menu_action_res_users"]',run:"click",},{content:`Login column should be ${translation}`,trigger:`[data-name="login"] span:contains("${translation}")`,}]}
tour.register('ir_model_fields_translation_en_tour',{test:true,url:'/web',},checkLoginColumn('Login'));tour.register('ir_model_fields_translation_en_tour2',{test:true,url:'/web',},checkLoginColumn('Login2'));tour.register('ir_model_fields_translation_fr_tour',{test:true,url:'/web',},checkLoginColumn('Identifiant'));tour.register('ir_model_fields_translation_fr_tour2',{test:true,url:'/web',},checkLoginColumn('Identifiant2'));return __exports;});;

/* /web/static/tests/legacy/helpers/test_utils_file.js */
odoo.define('web.test_utils_file',function(){"use strict";function _createFakeDataTransfer(files){return{dropEffect:'all',effectAllowed:'all',files,getData:function(){return files;},items:[],types:['Files'],};}
function createFile(data){return new Promise(function(resolve,reject){var requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;if(!requestFileSystem){throw new Error('FileSystem API is not supported');}
requestFileSystem(window.TEMPORARY,1024*1024,function(fileSystem){fileSystem.root.getFile(data.name,{create:true},function(fileEntry){fileEntry.createWriter(function(fileWriter){fileWriter.onwriteend=function(e){fileSystem.root.getFile(data.name,{},function(fileEntry){fileEntry.file(function(file){resolve(file);});});};fileWriter.write(new Blob([data.content],{type:data.contentType}));});});});});}
function dragoverFile($el,file){var ev=new Event('dragover',{bubbles:true});Object.defineProperty(ev,'dataTransfer',{value:_createFakeDataTransfer(file),});$el[0].dispatchEvent(ev);}
function dropFile($el,file){var ev=new Event('drop',{bubbles:true,});Object.defineProperty(ev,'dataTransfer',{value:_createFakeDataTransfer([file]),});$el[0].dispatchEvent(ev);}
function dropFiles($el,files){var ev=new Event('drop',{bubbles:true,});Object.defineProperty(ev,'dataTransfer',{value:_createFakeDataTransfer(files),});$el[0].dispatchEvent(ev);}
function inputFiles(el,files){const dataTransfer=new window.DataTransfer();for(const file of files){dataTransfer.items.add(file);}
el.files=dataTransfer.files;const versionRaw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);const chromeVersion=versionRaw?parseInt(versionRaw[2],10):false;if(!chromeVersion||chromeVersion>=73){el.dispatchEvent(new Event('change'));}}
return{createFile:createFile,dragoverFile:dragoverFile,dropFile:dropFile,dropFiles,inputFiles,};});;

/* /web/static/tests/helpers/cleanup.js */
odoo.define('@web/../tests/helpers/cleanup',async function(require){'use strict';let __exports={};const cleanups=[];__exports.registerCleanup=registerCleanup;function registerCleanup(callback){cleanups.push(callback);}
if(window.QUnit){QUnit.on("OdooAfterTestHook",(info)=>{if(QUnit.config.debug){return;}
let cleanup;while((cleanup=cleanups.pop())){try{cleanup(info);}catch(error){console.error(error);}}});const validElements=[{tagName:"DIV",attr:"id",value:"qunit",keep:true},{tagName:"DIV",attr:"id",value:"qunit-fixture",keep:true},{tagName:"SCRIPT",attr:"id",value:""},{tagName:"DIV",attr:"class",value:"o_notification_manager"},{tagName:"DIV",attr:"class",value:"tooltip fade bs-tooltip-auto"},{tagName:"DIV",attr:"class",value:"tooltip fade bs-tooltip-auto show",},{tagName:"DIV",attr:"class",value:"tooltip tooltip-field-info fade bs-tooltip-auto",},{tagName:"DIV",attr:"class",value:"tooltip tooltip-field-info fade bs-tooltip-auto show",},{tagName:"SPAN",attr:"class",value:"select2-hidden-accessible"},{tagName:"DIV",attr:"class",value:"ui-helper-hidden-accessible"},{tagName:"UL",attr:"class",value:"ui-menu ui-widget ui-widget-content ui-autocomplete ui-front",},{tagName:"UL",attr:"class",value:"ui-menu ui-widget ui-widget-content ui-autocomplete dropdown-menu ui-front",},];QUnit.on("OdooAfterTestHook",function(info){if(QUnit.config.debug){return;}
const failed=info.testReport.getStatus()==="failed";const toRemove=[];for(const bodyChild of document.body.children){const tolerated=validElements.find((e)=>e.tagName===bodyChild.tagName&&bodyChild.getAttribute(e.attr)===e.value);if(!failed&&!tolerated){QUnit.pushFailure(`Body still contains undesirable elements:\n${bodyChild.outerHTML}`);}
if(!tolerated||!tolerated.keep){toRemove.push(bodyChild);}}
const qunitFixture=document.getElementById("qunit-fixture");if(qunitFixture.children.length){toRemove.push(...qunitFixture.children);}
for(const el of toRemove){el.remove();}
document.body.classList.remove("modal-open");});}
return __exports;});;

/* /web/static/tests/helpers/utils.js */
odoo.define('@web/../tests/helpers/utils',async function(require){'use strict';let __exports={};const{browser}=require("@web/core/browser/browser");const{isMacOS}=require("@web/core/browser/feature_detection");const{download}=require("@web/core/network/download");const{Deferred}=require("@web/core/utils/concurrency");const{patch,unpatch}=require("@web/core/utils/patch");const{isVisible}=require("@web/core/utils/ui");const{registerCleanup}=require("@web/../tests/helpers/cleanup");const{templates}=require("@web/core/assets");const{App,onMounted,onPatched,useComponent}=require("@odoo/owl");__exports.patchDate=patchDate;function patchDate(year,month,day,hours,minutes,seconds){var RealDate=window.Date;var actualDate=new RealDate();var fakeDate=new RealDate(year,month,day,hours,minutes,seconds);if(!(luxon.Settings.defaultZone instanceof luxon.FixedOffsetZone)){throw new Error("luxon.Settings.defaultZone must be a FixedOffsetZone");}
const browserOffset=-fakeDate.getTimezoneOffset();const patchedOffset=luxon.Settings.defaultZone.offset();const offsetDiff=patchedOffset-browserOffset;const correctedMinutes=fakeDate.getMinutes()-offsetDiff;fakeDate.setMinutes(correctedMinutes);var timeInterval=actualDate.getTime()-fakeDate.getTime();window.Date=(function(NativeDate){function Date(Y,M,D,h,m,s,ms){var length=arguments.length;let date;if(arguments.length>0){date=length==1&&String(Y)===Y?new NativeDate(Date.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,s,ms):length>=6?new NativeDate(Y,M,D,h,m,s):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y):new NativeDate();date.constructor=Date;return date;}else{date=new NativeDate();var time=date.getTime();time-=timeInterval;date.setTime(time);return date;}}
for(var key in NativeDate){Date[key]=NativeDate[key];}
Date.now=function(){var date=new NativeDate();var time=date.getTime();time-=timeInterval;return time;};Date.UTC=NativeDate.UTC;Date.prototype=NativeDate.prototype;Date.prototype.constructor=Date;Date.parse=NativeDate.parse;return Date;})(Date);registerCleanup(()=>{window.Date=RealDate;});}
__exports.patchTimeZone=patchTimeZone;function patchTimeZone(offset){const originalZone=luxon.Settings.defaultZone;luxon.Settings.defaultZone=new luxon.FixedOffsetZone.instance(offset);registerCleanup(()=>{luxon.Settings.defaultZone=originalZone;});}
let nextId=1;__exports.patchWithCleanup=patchWithCleanup;function patchWithCleanup(obj,patchValue,options){const patchName=`__test_patch_${nextId++}__`;patch(obj,patchName,patchValue,options);registerCleanup(()=>{unpatch(obj,patchName);});}
__exports.getFixture=getFixture;function getFixture(){if(!window.QUnit){return document;}
if(QUnit.config.debug){return document.body;}else{return document.querySelector("#qunit-fixture");}}
__exports.nextTick=nextTick;async function nextTick(){await new Promise((resolve)=>window.requestAnimationFrame(resolve));await new Promise((resolve)=>setTimeout(resolve));}
__exports.makeDeferred=makeDeferred;function makeDeferred(){return new Deferred();}
__exports.findElement=findElement;function findElement(el,selector){let target=el;if(selector){const els=el.querySelectorAll(selector);if(els.length===0){throw new Error(`No element found (selector: ${selector})`);}
if(els.length>1){throw new Error(`Found ${els.length} elements, instead of 1 (selector: ${selector})`);}
target=els[0];}
return target;}
function keyboardEventBubble(args){return Object.assign({},args,{bubbles:true,keyCode:args.which,cancelable:true,});}
function mouseEventMapping(args){return{clientX:args?args.pageX:undefined,clientY:args?args.pageY:undefined,...args,bubbles:true,cancelable:true,view:window,};}
function mouseEventNoBubble(args){return{clientX:args?args.pageX:undefined,clientY:args?args.pageY:undefined,...args,bubbles:false,cancelable:false,view:window,};}
function touchEventMapping(args){return{...args,cancelable:true,bubbles:true,composed:true,view:window,rotation:0.0,zoom:1.0,touches:args.touches?[...args.touches.map((e)=>new Touch(e))]:undefined,};}
function touchEventCancelMapping(args){return{...touchEventMapping(args),cancelable:false,};}
function noBubble(args){return Object.assign({},args,{bubbles:false});}
function onlyBubble(args){return Object.assign({},args,{bubbles:true});}
const EVENT_TYPES={auxclick:{constructor:MouseEvent,processParameters:mouseEventMapping},click:{constructor:MouseEvent,processParameters:mouseEventMapping},contextmenu:{constructor:MouseEvent,processParameters:mouseEventMapping,},dblclick:{constructor:MouseEvent,processParameters:mouseEventMapping},mousedown:{constructor:MouseEvent,processParameters:mouseEventMapping},mouseup:{constructor:MouseEvent,processParameters:mouseEventMapping},mousemove:{constructor:MouseEvent,processParameters:mouseEventMapping},mouseenter:{constructor:MouseEvent,processParameters:mouseEventNoBubble,},mouseleave:{constructor:MouseEvent,processParameters:mouseEventNoBubble,},mouseover:{constructor:MouseEvent,processParameters:mouseEventMapping},mouseout:{constructor:MouseEvent,processParameters:mouseEventMapping},focus:{constructor:FocusEvent,processParameters:noBubble},focusin:{constructor:FocusEvent,processParameters:onlyBubble},blur:{constructor:FocusEvent,processParameters:noBubble},cut:{constructor:ClipboardEvent,processParameters:onlyBubble},copy:{constructor:ClipboardEvent,processParameters:onlyBubble},paste:{constructor:ClipboardEvent,processParameters:onlyBubble},keydown:{constructor:KeyboardEvent,processParameters:keyboardEventBubble,},keypress:{constructor:KeyboardEvent,processParameters:keyboardEventBubble,},keyup:{constructor:KeyboardEvent,processParameters:keyboardEventBubble},drag:{constructor:DragEvent,processParameters:onlyBubble},dragend:{constructor:DragEvent,processParameters:onlyBubble},dragenter:{constructor:DragEvent,processParameters:onlyBubble},dragstart:{constructor:DragEvent,processParameters:onlyBubble},dragleave:{constructor:DragEvent,processParameters:onlyBubble},dragover:{constructor:DragEvent,processParameters:onlyBubble},drop:{constructor:DragEvent,processParameters:onlyBubble},input:{constructor:InputEvent,processParameters:onlyBubble},compositionstart:{constructor:CompositionEvent,processParameters:onlyBubble,},compositionend:{constructor:CompositionEvent,processParameters:onlyBubble,},};if(typeof TouchEvent==="function"){Object.assign(EVENT_TYPES,{touchstart:{constructor:TouchEvent,processParameters:touchEventMapping,},touchend:{constructor:TouchEvent,processParameters:touchEventMapping},touchmove:{constructor:TouchEvent,processParameters:touchEventMapping,},touchcancel:{constructor:TouchEvent,processParameters:touchEventCancelMapping,},});}
function _makeEvent(eventType,eventAttrs){let event;if(eventType in EVENT_TYPES){const{constructor,processParameters}=EVENT_TYPES[eventType];event=new constructor(eventType,processParameters(eventAttrs));}else{event=new Event(eventType,Object.assign({},eventAttrs,{bubbles:true}));}
return event;}
__exports.triggerEvent=triggerEvent;function triggerEvent(el,selector,eventType,eventAttrs={},options={}){const event=_makeEvent(eventType,eventAttrs);const target=findElement(el,selector);if(!target){throw new Error(`Can't find a target to trigger ${eventType} event`);}
if(!options.skipVisibilityCheck){if(!isVisible(target)){throw new Error(`Called triggerEvent ${eventType} on invisible target`);}}
target.dispatchEvent(event);if(!options.fast){return nextTick().then(()=>event);}
return event;}
__exports.triggerEvents=triggerEvents;async function triggerEvents(el,querySelector,events,options){for(let e=0;e<events.length;e++){if(Array.isArray(events[e])){triggerEvent(el,querySelector,events[e][0],events[e][1],options);}else{triggerEvent(el,querySelector,events[e],{},options);}}
await nextTick();}
__exports.triggerScroll=triggerScroll;async function triggerScroll(target,coordinates={left:null,top:null},canPropagate=true){const isScrollable=(target.scrollHeight>target.clientHeight&&target.clientHeight>0)||(target.scrollWidth>target.clientWidth&&target.clientWidth>0);if(!isScrollable&&!canPropagate){return;}
if(isScrollable){const canScrollFrom={left:coordinates.left>target.scrollLeft?target.scrollLeft+target.clientWidth<target.scrollWidth:target.scrollLeft>0,top:coordinates.top>target.scrollTop?target.scrollTop+target.clientHeight<target.scrollHeight:target.scrollTop>0,};const scrollCoordinates={};Object.entries(coordinates).forEach(([key,value])=>{if(value!==null&&canScrollFrom[key]){scrollCoordinates[key]=value;delete coordinates[key];}});target.scrollTo(scrollCoordinates);target.dispatchEvent(new UIEvent("scroll"));await nextTick();if(!canPropagate||!Object.entries(coordinates).length){return;}}
target.parentElement?triggerScroll(target.parentElement,coordinates):window.dispatchEvent(new UIEvent("scroll"));await nextTick();}
__exports.click=click;function click(el,selector,skipVisibilityCheck=false){return triggerEvent(el,selector,"click",{bubbles:true,cancelable:true},{skipVisibilityCheck});}
__exports.clickCreate=clickCreate;function clickCreate(htmlElement){if(htmlElement.querySelectorAll(".o_form_button_create").length){return click(htmlElement,".o_form_button_create");}else if(htmlElement.querySelectorAll(".o_list_button_create").length){return click(htmlElement,".o_list_button_create");}else{throw new Error("No edit button found to be clicked.");}}
__exports.clickEdit=clickEdit;function clickEdit(htmlElement){if(htmlElement.querySelectorAll(".o_list_button_edit").length){return click(htmlElement,".o_list_button_edit");}else{throw new Error("No edit button found to be clicked.");}}
__exports.clickSave=clickSave;async function clickSave(htmlElement){if(htmlElement.querySelectorAll(".o_form_status_indicator").length){await mouseEnter(htmlElement,".o_form_status_indicator");}
if(htmlElement.querySelectorAll(".o_form_button_save").length){return click(htmlElement,".o_form_button_save");}else if(htmlElement.querySelectorAll(".o_list_button_save").length){return click(htmlElement,".o_list_button_save");}else{throw new Error("No save button found to be clicked.");}}
__exports.clickDiscard=clickDiscard;async function clickDiscard(htmlElement){if(htmlElement.querySelectorAll(".o_form_status_indicator").length){await mouseEnter(htmlElement,".o_form_status_indicator");}
if(htmlElement.querySelectorAll(".o_form_button_cancel").length){return click(htmlElement,".o_form_button_cancel");}else if(htmlElement.querySelectorAll(".o_list_button_discard").length){return click(htmlElement,".o_list_button_discard");}else{throw new Error("No discard button found to be clicked.");}}
__exports.mouseEnter=mouseEnter;async function mouseEnter(el,selector,coordinates){const target=el.querySelector(selector)||el;const atPos=coordinates||{clientX:target.getBoundingClientRect().left+target.getBoundingClientRect().width/2,clientY:target.getBoundingClientRect().top+target.getBoundingClientRect().height/2,};return triggerEvent(target,null,"mouseenter",atPos);}
__exports.editInput=editInput;async function editInput(el,selector,value){const input=findElement(el,selector);if(!(input instanceof HTMLInputElement||input instanceof HTMLTextAreaElement)){throw new Error("Only 'input' and 'textarea' elements can be edited with 'editInput'.");}
if(!["text","textarea","email","search","color","number","file","tel"].includes(input.type)){throw new Error(`Type "${input.type}" not supported by 'editInput'.`);}
const eventOpts={};if(input.type==="file"){const files=Array.isArray(value)?value:[value];const dataTransfer=new DataTransfer();for(const file of files){if(!(file instanceof File)){throw new Error(`File input value should be one or several File objects.`);}
dataTransfer.items.add(file);}
input.files=dataTransfer.files;eventOpts.skipVisibilityCheck=true;}else{input.value=value;}
await triggerEvents(input,null,["input","change"],eventOpts);if(input.type==="file"){await nextTick();await nextTick();}}
__exports.editSelect=editSelect;function editSelect(el,selector,value){const select=findElement(el,selector);if(select.tagName!=="SELECT"){throw new Error("Only select tag can be edited with selectInput.");}
select.value=value;return triggerEvent(select,null,"change");}
__exports.triggerHotkey=triggerHotkey;function triggerHotkey(hotkey,addOverlayModParts=false,eventAttrs={}){eventAttrs.key=hotkey.split("+").pop();if(/shift/i.test(hotkey)){eventAttrs.shiftKey=true;}
if(/control/i.test(hotkey)){if(isMacOS()){eventAttrs.metaKey=true;}else{eventAttrs.ctrlKey=true;}}
if(/alt/i.test(hotkey)||addOverlayModParts){if(isMacOS()){eventAttrs.ctrlKey=true;}else{eventAttrs.altKey=true;}}
if(!("bubbles"in eventAttrs)){eventAttrs.bubbles=true;}
const keydownEvent=new KeyboardEvent("keydown",eventAttrs);const keyupEvent=new KeyboardEvent("keyup",eventAttrs);document.activeElement.dispatchEvent(keydownEvent);document.activeElement.dispatchEvent(keyupEvent);return{keydownEvent,keyupEvent};}
__exports.legacyExtraNextTick=legacyExtraNextTick;async function legacyExtraNextTick(){return nextTick();}
__exports.mockDownload=mockDownload;function mockDownload(cb){patchWithCleanup(download,{_download:cb});}
const hushConsole=__exports.hushConsole=Object.create(null);for(const propName of Object.keys(window.console)){hushConsole[propName]=()=>{};}
__exports.mockSendBeacon=mockSendBeacon;function mockSendBeacon(mock){patchWithCleanup(navigator,{sendBeacon:(url,blob)=>{return mock(url,blob)!==false;},});}
__exports.mockTimeout=mockTimeout;function mockTimeout(){const timeouts=new Map();let currentTime=0;let id=1;patchWithCleanup(browser,{setTimeout(fn,delay=0){timeouts.set(id,{fn,scheduledFor:delay+currentTime,id});return id++;},clearTimeout(id){timeouts.delete(id);},});return{execRegisteredTimeouts(){for(const{fn}of timeouts.values()){fn();}
timeouts.clear();},async advanceTime(duration){await nextTick();currentTime+=duration;for(const{fn,scheduledFor,id}of timeouts.values()){if(scheduledFor<=currentTime){fn();timeouts.delete(id);}}
await nextTick();},};}
__exports.mockAnimationFrame=mockAnimationFrame;function mockAnimationFrame(){const callbacks=new Map();let id=1;patchWithCleanup(browser,{requestAnimationFrame(fn){callbacks.set(id,fn);return id++;},cancelAnimationFrame(id){callbacks.delete(id);},});return function execRegisteredCallbacks(){for(const fn of callbacks.values()){fn();}
callbacks.clear();};}
__exports.mount=mount;async function mount(Comp,target,config={}){let{props,env}=config;env=env||{};const configuration={env,templates,test:true,props,};if(env.services&&"localization"in env.services){configuration.translateFn=env._t;}
const app=new App(Comp,configuration);registerCleanup(()=>app.destroy());return app.mount(target);}
__exports.destroy=destroy;function destroy(comp){comp.__owl__.app.destroy();}
__exports.findChildren=findChildren;function findChildren(comp,predicate=(e)=>e){const queue=[];[].unshift.apply(queue,Object.values(comp.__owl__.children));while(queue.length>0){const curNode=queue.pop();if(predicate(curNode)){return curNode;}
[].unshift.apply(queue,Object.values(curNode.component.__owl__.children));}}
__exports.useChild=useChild;function useChild(){const node=useComponent().__owl__;const setChild=()=>{const componentNode=Object.values(node.children)[0];node.component.child=componentNode.component;};onMounted(setChild);onPatched(setChild);}
const lifeCycleHooks=["onError","onMounted","onPatched","onRendered","onWillDestroy","onWillPatch","onWillRender","onWillStart","onWillUnmount","onWillUpdateProps",];__exports.useLogLifeCycle=useLogLifeCycle;function useLogLifeCycle(logFn,name=""){const component=owl.useComponent();let loggedName=`${component.constructor.name}`;if(name){loggedName=`${component.constructor.name} ${name}`;}
for(const hook of lifeCycleHooks){owl[hook](()=>{logFn(`${hook} ${loggedName}`);});}}
function getDifferentParents(n1,n2){const parents=[n2];while(parents[0].parentNode){const parent=parents[0].parentNode;if(parent.contains(n1)){break;}
parents.unshift(parent);}
return parents;}
__exports.dragAndDrop=dragAndDrop;async function dragAndDrop(from,to,position){const dropFunction=drag(from,to,position);await dropFunction();}
__exports.drag=drag;function drag(from,to,position){const fixture=getFixture();from=from instanceof Element?from:fixture.querySelector(from);to=to instanceof Element?to:fixture.querySelector(to);const fromRect=from.getBoundingClientRect();const toRect=to.getBoundingClientRect();triggerEvent(from,null,"mousedown",{clientX:fromRect.x+fromRect.width/2,clientY:fromRect.y+fromRect.height/2,});const toPos={clientX:toRect.x+toRect.width/2,clientY:toRect.y+toRect.height/2,};if(position&&typeof position==="object"){toPos.clientX+=position.x||0;toPos.clientY+=position.y||0;}else{switch(position){case"top":{toPos.clientY=toRect.y-1;break;}
case"bottom":{toPos.clientY=toRect.y+toRect.height+1;break;}
case"left":{toPos.clientX=toRect.x-1;break;}
case"right":{toPos.clientX=toRect.x+toRect.width+1;break;}}}
triggerEvent(window,null,"mousemove",toPos);for(const target of getDifferentParents(from,to)){triggerEvent(target,null,"mouseenter",toPos);}
return function(){return drop(from,toPos);};}
function drop(from,toPos){return triggerEvent(from,null,"mouseup",toPos);}
__exports.clickDropdown=clickDropdown;async function clickDropdown(target,fieldName){const dropdownInput=target.querySelector(`[name='${fieldName}'] .dropdown input`);dropdownInput.focus();await nextTick();await click(dropdownInput);}
__exports.clickOpenedDropdownItem=clickOpenedDropdownItem;async function clickOpenedDropdownItem(target,fieldName,itemContent){const dropdowns=target.querySelectorAll(`[name='${fieldName}'] .dropdown .dropdown-menu`);if(dropdowns.length===0){throw new Error(`No dropdown found for field ${fieldName}`);}else if(dropdowns.length>1){throw new Error(`Found ${dropdowns.length} dropdowns for field ${fieldName}`);}
const dropdownItems=dropdowns[0].querySelectorAll("li");const indexToClick=Array.from(dropdownItems).map((html)=>html.textContent).indexOf(itemContent);if(indexToClick===-1){throw new Error(`The element '${itemContent}' does not exist in the dropdown`);}
await click(dropdownItems[indexToClick],null,"click");}
__exports.selectDropdownItem=selectDropdownItem;async function selectDropdownItem(target,fieldName,itemContent){await clickDropdown(target,fieldName);await clickOpenedDropdownItem(target,fieldName,itemContent);}
__exports.getNodesTextContent=getNodesTextContent;function getNodesTextContent(nodes){return Array.from(nodes).map((n)=>n.textContent);}
__exports.clickOpenM2ODropdown=clickOpenM2ODropdown;async function clickOpenM2ODropdown(el,fieldName,selector){const m2oSelector=`${selector || ""} .o_field_many2one[name=${fieldName}] input`;const matches=el.querySelectorAll(m2oSelector);if(matches.length!==1){throw new Error(`cannot open m2o: selector ${selector} has been found ${matches.length} instead of 1`);}
await click(matches[0]);return matches[0];}
__exports.clickM2OHighlightedItem=clickM2OHighlightedItem;async function clickM2OHighlightedItem(el,fieldName,selector){const m2oSelector=`${selector || ""} .o_field_many2one[name=${fieldName}] input`;const matches=el.querySelectorAll(m2oSelector);if(matches.length!==1){throw new Error(`cannot open m2o: selector ${selector} has been found ${matches.length} instead of 1`);}
return click(matches[0].parentElement.querySelector("li"));}
__exports.addRow=addRow;async function addRow(target,selector){await click(target.querySelector(`${selector ? selector : ""} .o_field_x2many_list_row_add a`));}
__exports.removeRow=removeRow;async function removeRow(target,index){await click(target.querySelectorAll(".o_list_record_remove")[index]);}
return __exports;});;

/* /web/static/tests/utils.js */
odoo.define('@web/../tests/utils',async function(require){'use strict';let __exports={};const{isVisible}=require("@web/core/utils/ui");const{registerCleanup}=require("@web/../tests/helpers/cleanup");const{click:webClick,getFixture,makeDeferred,triggerEvents:webTriggerEvents,}=require("@web/../tests/helpers/utils");__exports.createFile=createFile;function createFile(data){return new Promise(function(resolve,reject){var requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;if(!requestFileSystem){throw new Error("FileSystem API is not supported");}
requestFileSystem(window.TEMPORARY,1024*1024,function(fileSystem){fileSystem.root.getFile(data.name,{create:true},function(fileEntry){fileEntry.createWriter(function(fileWriter){fileWriter.onwriteend=function(e){fileSystem.root.getFile(data.name,{},function(fileEntry){fileEntry.file(function(file){resolve(file);});});};fileWriter.write(new Blob([data.content],{type:data.contentType}));});});});});}
function createFakeDataTransfer(files){return{dropEffect:"all",effectAllowed:"all",files,items:[],types:["Files"],};}
__exports.click=click;async function click(selector,options={}){const{shiftKey}=options;delete options.shiftKey;await contains(selector,{click:{shiftKey},...options});}
__exports.dragenterFiles=dragenterFiles;async function dragenterFiles(selector,files,options){await contains(selector,{dragenterFiles:files,...options});}
__exports.dragoverFiles=dragoverFiles;async function dragoverFiles(selector,files,options){await contains(selector,{dragoverFiles:files,...options});}
__exports.dropFiles=dropFiles;async function dropFiles(selector,files,options){await contains(selector,{dropFiles:files,...options});}
__exports.inputFiles=inputFiles;async function inputFiles(selector,files,options){await contains(selector,{inputFiles:files,...options});}
__exports.pasteFiles=pasteFiles;async function pasteFiles(selector,files,options){await contains(selector,{pasteFiles:files,...options});}
__exports.focus=focus;async function focus(selector,options){await contains(selector,{setFocus:true,...options});}
__exports.insertText=insertText;async function insertText(selector,content,options={}){const{replace=false}=options;delete options.replace;await contains(selector,{...options,insertText:{content,replace}});}
__exports.scroll=scroll;async function scroll(selector,scrollTop,options){await contains(selector,{setScroll:scrollTop,...options});}
__exports.triggerEvents=triggerEvents;async function triggerEvents(selector,events,options){await contains(selector,{triggerEvents:events,...options});}
function log(ok,message){if(window.QUnit){QUnit.assert.ok(ok,message);}else{if(ok){console.log(message);}else{console.error(message);}}}
let hasUsedContainsPositively=false;if(window.QUnit){QUnit.testStart(()=>(hasUsedContainsPositively=false));}
class Contains{constructor(selector,options={}){this.selector=selector;this.options=options;this.options.count=this.options.count===undefined?1:this.options.count;this.options.targetParam=this.options.target;this.options.target=this.options.target===undefined?getFixture():this.options.target;let selectorMessage=`${this.options.count} of "${this.selector}"`;if(this.options.visible!==undefined){selectorMessage=`${selectorMessage} ${
                this.options.visible ? "visible" : "invisible"
            }`;}
if(this.options.targetParam){selectorMessage=`${selectorMessage} inside a specific target`;}
if(this.options.parent){selectorMessage=`${selectorMessage} inside a specific parent`;}
if(this.options.contains){selectorMessage=`${selectorMessage} with a specified sub-contains`;}
if(this.options.text!==undefined){selectorMessage=`${selectorMessage} with text "${this.options.text}"`;}
if(this.options.textContent!==undefined){selectorMessage=`${selectorMessage} with textContent "${this.options.textContent}"`;}
if(this.options.value!==undefined){selectorMessage=`${selectorMessage} with value "${this.options.value}"`;}
if(this.options.scroll!==undefined){selectorMessage=`${selectorMessage} with scroll "${this.options.scroll}"`;}
if(this.options.after!==undefined){selectorMessage=`${selectorMessage} after a specified element`;}
if(this.options.before!==undefined){selectorMessage=`${selectorMessage} before a specified element`;}
this.selectorMessage=selectorMessage;if(this.options.contains&&!Array.isArray(this.options.contains[0])){this.options.contains=[this.options.contains];}
if(this.options.count){hasUsedContainsPositively=true;}else if(!hasUsedContainsPositively){throw new Error(`Starting a test with "contains" of count 0 for selector "${this.selector}" is useless because it might immediately resolve. Start the test by checking that an expected element actually exists.`);}
this.successMessage=undefined;this.executeError=undefined;}
run(){this.done=false;this.def=makeDeferred();this.scrollListeners=new Set();this.onScroll=()=>this.runOnce("after scroll");if(!this.runOnce("immediately")){this.timer=setTimeout(()=>this.runOnce("Timeout of 5 seconds",{crashOnFail:true}),5000);this.observer=new MutationObserver((mutations)=>{try{this.runOnce("after mutations");}catch(e){this.def.reject(e);}});this.observer.observe(document.body,{attributes:true,childList:true,subtree:true,});registerCleanup(()=>{if(!this.done){this.runOnce("Test ended",{crashOnFail:true});}});}
return this.def;}
runOnce(whenMessage,{crashOnFail=false,executeOnSuccess=true}={}){const res=this.select();if((res&&res.length===this.options.count)||crashOnFail){if(this.observer){this.observer.disconnect();}
clearTimeout(this.timer);for(const el of this.scrollListeners||[]){el.removeEventListener("scroll",this.onScroll);}
this.done=true;}
if(res&&res.length===this.options.count){this.successMessage=`Found ${this.selectorMessage} (${whenMessage})`;if(executeOnSuccess){this.executeAction(res[0]);}
return res;}else{this.executeError=()=>{let message=`Failed to find ${this.selectorMessage} (${whenMessage}).`;message=res?`${message} Found ${res.length} instead.`:`${message} Parent not found.`;if(this.parentContains){if(this.parentContains.successMessage){log(true,this.parentContains.successMessage);}else{this.parentContains.executeError();}}
log(false,message);if(this.def){this.def.reject(new Error(message));}
for(const childContains of this.childrenContains||[]){if(childContains.successMessage){log(true,childContains.successMessage);}else{childContains.executeError();}}};if(crashOnFail){this.executeError();}}}
executeAction(el){let message=this.successMessage;if(this.options.click){message=`${message} and clicked it`;webClick(el,undefined,{mouseEventInit:this.options.click,skipDisabledCheck:true,skipVisibilityCheck:true,});}
if(this.options.dragenterFiles){message=`${message} and dragentered ${this.options.dragenterFiles.length} file(s)`;const ev=new Event("dragenter",{bubbles:true});Object.defineProperty(ev,"dataTransfer",{value:createFakeDataTransfer(this.options.dragenterFiles),});el.dispatchEvent(ev);}
if(this.options.dragoverFiles){message=`${message} and dragovered ${this.options.dragoverFiles.length} file(s)`;const ev=new Event("dragover",{bubbles:true});Object.defineProperty(ev,"dataTransfer",{value:createFakeDataTransfer(this.options.dragoverFiles),});el.dispatchEvent(ev);}
if(this.options.dropFiles){message=`${message} and dropped ${this.options.dropFiles.length} file(s)`;const ev=new Event("drop",{bubbles:true});Object.defineProperty(ev,"dataTransfer",{value:createFakeDataTransfer(this.options.dropFiles),});el.dispatchEvent(ev);}
if(this.options.inputFiles){message=`${message} and inputted ${this.options.inputFiles.length} file(s)`;const dataTransfer=new window.DataTransfer();for(const file of this.options.inputFiles){dataTransfer.items.add(file);}
el.files=dataTransfer.files;const versionRaw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);const chromeVersion=versionRaw?parseInt(versionRaw[2],10):false;if(!chromeVersion||chromeVersion>=73){el.dispatchEvent(new Event("change"));}}
if(this.options.insertText!==undefined){message=`${message} and inserted text "${this.options.insertText.content}" (replace: ${this.options.insertText.replace})`;el.focus();if(this.options.insertText.replace){el.value="";el.dispatchEvent(new window.KeyboardEvent("keydown",{key:"Backspace"}));el.dispatchEvent(new window.KeyboardEvent("keyup",{key:"Backspace"}));el.dispatchEvent(new window.InputEvent("input"));}
for(const char of this.options.insertText.content){el.value+=char;el.dispatchEvent(new window.KeyboardEvent("keydown",{key:char}));el.dispatchEvent(new window.KeyboardEvent("keyup",{key:char}));el.dispatchEvent(new window.InputEvent("input"));}}
if(this.options.pasteFiles){message=`${message} and pasted ${this.options.pasteFiles.length} file(s)`;const ev=new Event("paste",{bubbles:true});Object.defineProperty(ev,"clipboardData",{value:createFakeDataTransfer(this.options.pasteFiles),});el.dispatchEvent(ev);}
if(this.options.setFocus){message=`${message} and focused it`;el.focus();}
if(this.options.setScroll!==undefined){message=`${message} and set scroll to "${this.options.setScroll}"`;el.scrollTop=this.options.setScroll==="bottom"?el.scrollHeight:this.options.setScroll;}
if(this.options.triggerEvents){message=`${message} and triggered "${this.options.triggerEvents.join(", ")}" events`;webTriggerEvents(el,null,this.options.triggerEvents,{skipVisibilityCheck:true,});}
if(this.parentContains){log(true,this.parentContains.successMessage);}
log(true,message);for(const childContains of this.childrenContains){log(true,childContains.successMessage);}
if(this.def){this.def.resolve();}}
select(){const target=this.selectParent();if(!target){return;}
const baseRes=[...target.querySelectorAll(this.selector)];this.childrenContains=[];const res=baseRes.filter((el,currentIndex)=>{let condition=(this.options.textContent===undefined||el.textContent.trim()===this.options.textContent)&&(this.options.value===undefined||el.value===this.options.value)&&(this.options.scroll===undefined||(this.options.scroll==="bottom"?Math.abs(el.scrollHeight-el.clientHeight-el.scrollTop)<=1:Math.abs(el.scrollTop-this.options.scroll)<=1));if(condition&&this.options.text!==undefined){if(el.textContent.trim()!==this.options.text&&[...el.querySelectorAll("*")].every((el)=>el.textContent.trim()!==this.options.text)){condition=false;}}
if(condition&&this.options.contains){for(const param of this.options.contains){const childContains=new Contains(param[0],{...param[1],target:el,});if(!childContains.runOnce(`as child of el ${currentIndex + 1})`,{executeOnSuccess:false,})){condition=false;}
this.childrenContains.push(childContains);}}
if(condition&&this.options.visible!==undefined){if(isVisible(el)!==this.options.visible){condition=false;}}
if(condition&&this.options.after){const afterContains=new Contains(this.options.after[0],{...this.options.after[1],target,});const afterEl=afterContains.runOnce(`as "after"`,{executeOnSuccess:false,});if(!afterEl||!afterEl[0]||!(el.compareDocumentPosition(afterEl[0])&Node.DOCUMENT_POSITION_PRECEDING)){condition=false;}
this.childrenContains.push(afterContains);}
if(condition&&this.options.before){const beforeContains=new Contains(this.options.before[0],{...this.options.before[1],target,});const beforeEl=beforeContains.runOnce(`as "before"`,{executeOnSuccess:false,});if(!beforeEl||!beforeEl[0]||!(el.compareDocumentPosition(beforeEl[0])&Node.DOCUMENT_POSITION_FOLLOWING)){condition=false;}
this.childrenContains.push(beforeContains);}
return condition;});if(this.options.scroll!==undefined&&this.scrollListeners&&baseRes.length===this.options.count&&res.length!==this.options.count){for(const el of baseRes){if(!this.scrollListeners.has(el)){this.scrollListeners.add(el);el.addEventListener("scroll",this.onScroll);}}}
return res;}
selectParent(){if(this.options.parent){this.parentContains=new Contains(this.options.parent[0],{...this.options.parent[1],target:this.options.target,});const res=this.parentContains.runOnce(`as parent`,{executeOnSuccess:false,});return res&&res[0];}
return this.options.target;}}
__exports.contains=contains;async function contains(selector,options){await new Contains(selector,options).run();}
return __exports;});;

/* /mail/static/tests/tours/discuss_public_tour.js */
odoo.define('@mail/../tests/tours/discuss_public_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/discuss_public_tour.js',{test:true,},[{trigger:'.o_DiscussPublicView',extraTrigger:'.o_ThreadView',},{content:"Check that we are on channel page",trigger:'.o_ThreadView',run(){if(!window.location.pathname.startsWith('/discuss/channel')){console.error('Did not automatically redirect to channel page');}
odoo.__DEBUG__.didLogInfo.then(()=>{const{missing,failed,unloaded}=odoo.__DEBUG__.jsModules;if([missing,failed,unloaded].some(arr=>arr.length)){console.error("Couldn't load all JS modules.",JSON.stringify({missing,failed,unloaded}));}
document.body.classList.add('o_mail_channel_public_modules_loaded');});},extraTrigger:'.o_mail_channel_public_modules_loaded',},{content:"Wait for all modules loaded check in previous step",trigger:'.o_mail_channel_public_modules_loaded',}]);return __exports;});;

/* /mail/static/tests/tours/mail_channel_as_guest_tour.js */
odoo.define('@mail/../tests/tours/mail_channel_as_guest_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/mail_channel_as_guest_tour.js',{test:true,},[{content:"Click join",trigger:'.o_WelcomeView_joinButton',extraTrigger:'.o_ThreadView',},{content:"Check that we are on channel page",trigger:'.o_ThreadView',run(){if(!window.location.pathname.startsWith('/discuss/channel')){console.error('Clicking on join button did not redirect to channel page');}
odoo.__DEBUG__.didLogInfo.then(()=>{const{missing,failed,unloaded}=odoo.__DEBUG__.jsModules;if([missing,failed,unloaded].some(arr=>arr.length)){console.error("Couldn't load all JS modules.",JSON.stringify({missing,failed,unloaded}));}
document.body.classList.add('o_mail_channel_as_guest_tour_modules_loaded');});},extraTrigger:'.o_mail_channel_as_guest_tour_modules_loaded',},{content:"Wait for all modules loaded check in previous step",trigger:'.o_mail_channel_as_guest_tour_modules_loaded',}]);return __exports;});;

/* /mail/static/tests/tours/mail_full_composer_test_tour.js */
odoo.define('@mail/../tests/tours/mail_full_composer_test_tour',async function(require){'use strict';let __exports={};const{createFile,inputFiles,}=require('web.test_utils_file');const{contains}=require('@web/../tests/utils');const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/mail_full_composer_test_tour.js',{test:true,},[{content:"Wait for the chatter to be fully loaded",trigger:".o_Chatter",async run(){await contains(".o_Message",{count:1});document.body.setAttribute("data-found-message",1);},},{content:"Click on Send Message",trigger:'.o_ChatterTopbar_buttonSendMessage',extra_trigger:'body[data-found-message=1]',},{content:"Write something in composer",trigger:'.o_ComposerTextInput_textarea',run:'text blahblah',},{content:"Add one file in composer",trigger:'.o_Composer_buttonAttachment',async run(){const file=await createFile({content:'hello, world',contentType:'text/plain',name:'text.txt',});const messaging=await odoo.__DEBUG__.messaging;const uploader=messaging.models['ComposerView'].all()[0].fileUploader;inputFiles(uploader.fileInput,[file]);},},{content:"Open full composer",trigger:'.o_Composer_buttonFullComposer',extra_trigger:'.o_AttachmentCard:not(.o-isUploading)'},{content:"Check the earlier provided attachment is listed",trigger:'.o_AttachmentCard[title="text.txt"]',run(){},},{content:"Check subject is autofilled",trigger:'[name="subject"] input',run(){const subjectValue=document.querySelector('[name="subject"] input').value;if(subjectValue!=="Re: Jane"){console.error(`Full composer should have "Re: Jane" in subject input (actual: ${subjectValue})`);}},},{content:"Check composer content is kept",trigger:'.o_field_html[name="body"]',run(){const bodyContent=document.querySelector('.o_field_html[name="body"]').textContent;if(!bodyContent.includes("blahblah")){console.error(`Full composer should contain text from small composer ("blahblah") in body input (actual: ${bodyContent})`);}},},{content:"Open templates",trigger:'.o_field_widget[name="template_id"] input',},{content:"Check a template is listed",in_modal:false,trigger:'.ui-autocomplete .ui-menu-item a:contains("Test template")',run(){},},{content:"Send message",trigger:'.o_mail_send',},{content:"Check message is shown",trigger:'.o_Message:contains("blahblah")',},{content:"Check message contains the attachment",trigger:'.o_Message .o_AttachmentCard_filename:contains("text.txt")',}]);return __exports;});;

/* /mail/static/tests/tours/user_modify_own_profile_tour.js */
odoo.define('@mail/../tests/tours/user_modify_own_profile_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/user_modify_own_profile_tour.js',{test:true,},[{content:'Open user account menu',trigger:'.o_user_menu button',},{content:"Open preferences / profile screen",trigger:'[data-menu=settings]',},{content:"Update the email address",trigger:'div[name="email"] input',run:'text updatedemail@example.com',},{content:"Save the form",trigger:'button[name="preference_save"]',},{content:"Wait until the modal is closed",trigger:'body:not(.modal-open)',}]);return __exports;});;

/* /portal/static/tests/tours/portal.js */
odoo.define('portal.tour',function(require){'use strict';var tour=require("web_tour.tour");tour.register('portal_load_homepage',{test:true,url:'/my',},[{content:"Check portal is loaded",trigger:'a[href*="/my/account"]:contains("Edit"):first',},{content:"Load my account details",trigger:'input[value="Joel Willis"]'}]);});;

/* /account/static/tests/tours/account_dashboard_setup_bar_tests.js */
odoo.define('account.dashboard.setup.tour',function(require){"use strict";var core=require('web.core');var tour=require('web_tour.tour');var _t=core._t;tour.register('account_render_report',{test:true,url:'/web',},[tour.stepUtils.showAppsMenuItem(),{id:'account_menu_click',trigger:'.o_app[data-menu-xmlid="account.menu_finance"]',position:'bottom',},{trigger:'.o_data_row:first .o_data_cell',extra_trigger:'.breadcrumb',},{trigger:'.o_control_panel button:contains("'+_t('Print')+'")',},{trigger:'.o_control_panel .o-dropdown--menu span:contains("'+_t('Invoices without Payment')+'")',},{trigger:'iframe .o_report_layout_standard h2',content:'Primary color is correct',run:function(){if(this.$anchor.css('color')!=="rgb(18, 52, 86)"){console.error('The primary color should be the one set on the company.');}},},{trigger:'iframe .o_report_layout_standard #informations div strong',content:'Secondary color is correct',run:function(){if(this.$anchor.css('color')!=="rgb(120, 145, 1)"){console.error('The secondary color should be the one set on the company.');}},}]);});;

/* /account/static/tests/tours/tax_group_tests.js */
odoo.define('@account/../tests/tours/tax_group_tests',async function(require){'use strict';let __exports={};"use strict";const tour=require('web_tour.tour');tour.register('account_tax_group',{test:true,url:"/web",},[tour.stepUtils.showAppsMenuItem(),{id:'account_menu_click',content:"Go to Invoicing",trigger:'.o_app[data-menu-xmlid="account.menu_finance"]',},{content:"Go to Vendors",trigger:'span:contains("Vendors")',},{content:"Go to Bills",trigger:'a:contains("Bills")',},{extra_trigger:'.breadcrumb:contains("Bills")',content:"Create new bill",trigger:'.o_list_button_add',},{content:"Add vendor",trigger:'div.o_field_widget.o_field_res_partner_many2one[name="partner_id"] div input',run:'text Account Tax Group Partner',},{content:"Valid vendor",trigger:'.ui-menu-item a:contains("Account Tax Group Partner")',},{content:"Add items",trigger:'div[name="invoice_line_ids"] .o_field_x2many_list_row_add a:contains("Add a line")',},{content:"Select input",trigger:'div[name="invoice_line_ids"] .o_selected_row .o_list_many2one[name="product_id"] input',},{content:"Type item",trigger:'div[name="invoice_line_ids"] .o_selected_row .o_list_many2one[name="product_id"] input',run:"text Account Tax Group Product",},{content:"Valid item",trigger:'.ui-menu-item-wrapper:contains("Account Tax Group Product")',},{content:"Save the account move",trigger:'.o_form_button_save',},...tour.stepUtils.saveForm(),{content:"Edit tax group amount",trigger:'.o_tax_group_edit',},{content:"Modify the input value",trigger:'.o_tax_group_edit_input input',run:function(actions){$('.o_tax_group_edit_input input').val(200);$('.o_tax_group_edit_input input').select();$('.o_tax_group_edit_input input').blur();},},{content:"Valid total amount",trigger:'span[name="amount_total"]:contains("800")',},{content:"Select item quantity",trigger:'div[name="invoice_line_ids"] tbody tr.o_data_row .o_list_number[name="quantity"]',},{content:"Change item quantity",trigger:'div[name="invoice_line_ids"] tbody tr.o_data_row .o_list_number[name="quantity"] input',run:'text 2',},{content:"Valid the new value",trigger:'div[name="invoice_line_ids"] tbody tr.o_data_row .o_list_number[name="quantity"] input',run:function(actions){let keydownEvent=jQuery.Event('keydown');keydownEvent.which=13;this.$anchor.trigger(keydownEvent);},},{content:"Save the account move",trigger:'.o_form_button_save',},...tour.stepUtils.saveForm(),{content:"Check new value of tax group",trigger:'.o_tax_group_amount_value:contains("120")',},{content:"Edit tax value",trigger:'.o_tax_group_edit_input input',run:'text 2'},{content:"Check new value of total",trigger:'.oe_subtotal_footer_separator:contains("1,202")',},{content:"Discard changes",trigger:'.o_form_button_cancel',},{content:"Check tax value is reset",trigger:'.o_tax_group_amount_value:contains("120")',},]);return __exports;});odoo.define(`account.tax.group.tour.tests`,async function(require){return require('@account/../tests/tours/tax_group_tests')[Symbol.for("default")];});;

/* /sale/static/tests/tours/sale_signature.js */
odoo.define('sale.tour_sale_signature',function(require){'use strict';var tour=require('web_tour.tour');tour.register('sale_signature',{test:true,url:'/my/quotes',},[{content:"open the test SO",trigger:'a:containsExact("test SO")',},{content:"click sign",trigger:'a:contains("Sign")',},{content:"check submit is enabled",trigger:'.o_portal_sign_submit:enabled',run:function(){},},{content:"click select style",trigger:'.o_web_sign_auto_select_style a',},{content:"click style 4",trigger:'.o_web_sign_auto_font_selection a:eq(3)',},{content:"click submit",trigger:'.o_portal_sign_submit:enabled',},{content:"check it's confirmed",trigger:'#quote_content:contains("Thank You")',},{trigger:'#quote_content',run:function(){window.location.href=window.location.origin+'/web';},},{trigger:'nav',run:function(){},}]);});;

/* /stock/static/tests/tours/stock_report_tests.js */
odoo.define('stock.reports.setup.tour',function(require){"use strict";const tour=require('web_tour.tour');tour.register('test_stock_route_diagram_report',{test:true,},[{trigger:'.o_kanban_record',extra_trigger:'.breadcrumb',},{trigger:'.nav-item > a:contains("Inventory")',},{trigger:'.btn[id="stock.view_diagram_button"]',},{trigger:'iframe .o_report_stock_rule',},]);tour.register("test_context_from_warehouse_filter",{test:true},[{trigger:".o_searchview_input",run:"click",},{trigger:".o_searchview_input",run:"text foo",},{trigger:".o_menu_item.dropdown-item:contains(Warehouse):contains(foo)",run:"click",},{trigger:".o_searchview_input",run:"click",},{trigger:".o_searchview_input",run:"text warehouse",},{trigger:".o_menu_item.dropdown-item:contains(Warehouse) a.o_expand > i",run:"click",},{trigger:".o_menu_item.dropdown-item.o_indent:contains(Warehouse A) a",run:"click",},{trigger:".o_searchview_input",run:"text warehouse",},{trigger:".o_menu_item.dropdown-item:contains(Warehouse) a.o_expand > i",run:"click",},{trigger:".o_menu_item.dropdown-item.o_indent:contains(Warehouse B) a",run:"click",},{content:"Go to product page",trigger:".oe_kanban_card:has(.o_kanban_record_title span:contains(Lovely Product))",run:"click",},{trigger:"button[name=action_product_tmpl_forecast_report]",run:"click",},{trigger:".o_graph_view",isCheck:true,},]);});;

/* /auth_totp/static/tests/totp_flow.js */
odoo.define('auth_totp.tours',function(require){"use strict";const tour=require('web_tour.tour');const ajax=require('web.ajax');function openRoot(){return[{content:"return to client root to avoid race condition",trigger:'body',run(){$('body').addClass('wait');window.location='/web';}},{content:"wait for client reload",trigger:'body:not(.wait)',run(){}}];}
function openUserProfileAtSecurityTab(){return[{content:'Open user account menu',trigger:'.o_user_menu .oe_topbar_name',run:'click',},{content:"Open preferences / profile screen",trigger:'[data-menu=settings]',run:'click',},{content:"Switch to security tab",trigger:'a[role=tab]:contains("Account Security")',run:'click',}];}
function closeProfileDialog({content,totp_state}){let trigger;switch(totp_state){case true:trigger='button[name=action_totp_disable]';break;case false:trigger='button[name=action_totp_enable_wizard]';break;case undefined:trigger='button.o_auth_2fa_btn';break;default:throw new Error(`Invalid totp state ${totp_state}`)}
return[{content,trigger,run(){const $modal=this.$anchor.parents('.o_dialog_container');if($modal.length){$modal.find('button[name=preference_cancel]').click()}}},{trigger:'body',async run(){while(document.querySelector('.o_dialog_container .o_dialog')){await Promise.resolve();}
this.$anchor.addClass('dialog-closed');},},{trigger:'body.dialog-closed',run(){},}];}
tour.register('totp_tour_setup',{test:true,url:'/web'},[...openUserProfileAtSecurityTab(),{content:"Open totp wizard",trigger:'button[name=action_totp_enable_wizard]',},{content:"Check that we have to enter enhanced security mode and input password",extra_trigger:'div:contains("enter your password")',trigger:'[name=password] input',run:'text demo',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"Check the wizard has opened",trigger:'li:contains("When requested to do so")',run(){}},{content:"Get secret from collapsed div",trigger:'a:contains("Cannot scan it?")',async run(helpers){const $secret=this.$anchor.closest('div').find('[name=secret] span:first-child');const $copyBtn=$secret.find('button');$copyBtn.remove();const token=await ajax.jsonRpc('/totphook','call',{secret:$secret.text()});helpers.text(token,'[name=code] input');helpers.click('button.btn-primary:contains(Activate)');$('body').addClass('got-token')}},{content:'wait for rpc',trigger:'body.got-token',run(){}},...openRoot(),...openUserProfileAtSecurityTab(),...closeProfileDialog({content:"Check that the button has changed",totp_state:true,}),]);tour.register('totp_login_enabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text demo',},{content:'input password',trigger:'input#password',run:'text demo',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"expect totp screen",trigger:'label:contains(Authentication Code)',},{content:"input code",trigger:'input[name=totp_token]',async run(helpers){const token=await ajax.jsonRpc('/totphook','call',{});helpers.text(token);helpers.click('button:contains("Log in")');}},{content:"check we're logged in",trigger:".o_user_menu .oe_topbar_name",run(){}}]);tour.register('totp_login_device',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text demo',},{content:'input password',trigger:'input#password',run:'text demo',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"expect totp screen",trigger:'label:contains(Authentication Code)',},{content:"check remember device box",trigger:'label[for=switch-remember]',},{content:"input code",trigger:'input[name=totp_token]',async run(helpers){const token=await ajax.jsonRpc('/totphook','call',{})
helpers.text(token);helpers.click('button:contains("Log in")');}},{content:"check we're logged in",trigger:".o_user_menu .oe_topbar_name",run:'click',},{content:"click the Log out button",trigger:'.dropdown-item[data-menu=logout]',},{content:"check that we're back on the login page or go to it",trigger:'input#login, a:contains(Log in)'},{content:"input login again",trigger:'input#login',run:'text demo',},{content:'input password again',trigger:'input#password',run:'text demo',},{content:"click da button again",trigger:'button:contains("Log in")',},{content:"check we're logged in without 2FA",trigger:".o_user_menu .oe_topbar_name",run(){}},...openUserProfileAtSecurityTab(),{content:"Open totp wizard",trigger:'button[name=action_totp_disable]',},{content:"Check that we have to enter enhanced security mode and input password",extra_trigger:'div:contains("enter your password")',trigger:'[name=password] input',run:'text demo',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},...openRoot(),...openUserProfileAtSecurityTab(),...closeProfileDialog({content:"Check that the button has changed",totp_state:false}),]);tour.register('totp_login_disabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text demo',},{content:'input password',trigger:'input#password',run:'text demo',},{content:"click da button",trigger:'button:contains("Log in")',},...openUserProfileAtSecurityTab(),...closeProfileDialog({})]);const columns={};tour.register('totp_admin_disables',{test:true,url:'/web'},[tour.stepUtils.showAppsMenuItem(),{content:'Go to settings',trigger:'[data-menu-xmlid="base.menu_administration"]'},{content:'Wait for page',trigger:'.o_menu_brand:contains("Settings")',run(){}},{content:"Open Users menu",trigger:'[data-menu-xmlid="base.menu_users"]'},{content:"Open Users view",trigger:'[data-menu-xmlid="base.menu_action_res_users"]',run(helpers){const $crumb=$('.breadcrumb');if($crumb.text().indexOf('Users')===-1){helpers.click();}else{helpers.click($('[data-menu-xmlid="base.menu_users"]'));}}},{content:"Find Demo User",trigger:'td.o_data_cell:contains("demo")',run(helpers){const $titles=this.$anchor.closest('table').find('tr:first th');for(let i=0;i<$titles.length;++i){columns[$titles[i].getAttribute('data-name')]=i;}
const $row=this.$anchor.closest('tr');const sel=$row.find('.o_list_record_selector input[type=checkbox]');helpers.click(sel);}},{content:"Open Actions menu",trigger:'button.dropdown-toggle:contains("Action")'},{content:"Select totp remover",trigger:'span.dropdown-item:contains(Disable two-factor authentication)'},{content:"Check that we have to enter enhanced security mode & input password",extra_trigger:'div:contains("enter your password")',trigger:'[name=password] input',run:'text admin',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"open the user's form",trigger:"td.o_data_cell:contains(demo)",},{content:"go to Account security Tab",trigger:"a.nav-link:contains(Account Security)",},...closeProfileDialog({content:"check that demo user has been de-totp'd",totp_state:false,}),])});;

/* /auth_totp_mail/static/tests/totp_flow.js */
odoo.define('auth_totp_mail.tours',function(require){"use strict";const tour=require('web_tour.tour');function openAccountSettingsTab(){return[{content:'Go to settings',trigger:'[data-menu-xmlid="base.menu_administration"]'},{content:'Wait for page',trigger:'.o_menu_brand:contains("Settings")',run:()=>{}},{content:"Open Users menu",trigger:'[data-menu-xmlid="base.menu_users"]'},{content:"Open Users view",trigger:'[data-menu-xmlid="base.menu_action_res_users"]',run:function(helpers){const $crumb=$('.breadcrumb');if($crumb.text().indexOf('Users')===-1){helpers.click();}else{helpers.click($('[data-menu-xmlid="base.menu_users"]'));}}}];}
tour.register('totp_admin_self_invite',{test:true,url:'/web'},[tour.stepUtils.showAppsMenuItem(),...openAccountSettingsTab(),{content:"open the user's form",trigger:"td.o_data_cell:contains(admin)",},{content:"go to Account security Tab",trigger:"a.nav-link:contains(Account Security)",},{content:"check that user cannot invite themselves to use 2FA.",trigger:"body",run:function(){const inviteBtn=$('button:contains(Invite to use 2FA)')[0];if(!inviteBtn){$('body').addClass('CannotInviteYourself');}}},{content:"check that user cannot invite themself.",trigger:"body.CannotInviteYourself"}]);tour.register('totp_admin_invite',{test:true,url:'/web'},[tour.stepUtils.showAppsMenuItem(),...openAccountSettingsTab(),{content:"open the user's form",trigger:"td.o_data_cell:contains(demo)",},{content:"go to Account security Tab",trigger:"a.nav-link:contains(Account Security)",},{content:"check that demo user can be invited to use 2FA.",trigger:"button:contains(Invite to use 2FA)",}]);});;

/* /auth_totp_portal/static/tests/totp_portal.js */
odoo.define('auth_totp_portal.tours',function(require){"use strict";const tour=require('web_tour.tour');const ajax=require('web.ajax');tour.register('totportal_tour_setup',{test:true,url:'/my/security'},[{content:"Open totp wizard",trigger:'button#auth_totp_portal_enable',},{content:"Check that we have to enter enhanced security mode",trigger:'div:contains("enter your password")',run:()=>{},},{content:"Input password",trigger:'[name=password]',run:'text portal',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"Check the wizard has opened",trigger:'li:contains("scan the barcode below")',run:()=>{}},{content:"Get secret from collapsed div",trigger:'a:contains("Cannot scan it?")',run:async function(helpers){const secret=this.$anchor.closest('div').find('span[name="secret"]').text();const token=await ajax.jsonRpc('/totphook','call',{secret});helpers._text(helpers._get_action_values('input[name=code]'),token);helpers._click(helpers._get_action_values('button.btn-primary:contains(Activate)'));}},{content:"Check that the button has changed",trigger:'button:contains(Disable two-factor authentication)',run:()=>{}}]);tour.register('totportal_login_enabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text portal',},{content:'input password',trigger:'input#password',run:'text portal',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"expect totp screen",trigger:'label:contains(Authentication Code)',},{content:"input code",trigger:'input[name=totp_token]',run:async function(helpers){const token=await ajax.jsonRpc('/totphook','call',{});helpers._text(helpers._get_action_values(),token);helpers._click(helpers._get_action_values('button:contains("Log in")'));}},{content:"check we're logged in",trigger:"h3:contains(Documents)",run:()=>{}},{content:"go back to security",trigger:"a:contains(Security)",},{content:"Open totp wizard",trigger:'button#auth_totp_portal_disable',},{content:"Check that we have to enter enhanced security mode",trigger:'div:contains("enter your password")',run:()=>{},},{content:"Input password",trigger:'[name=password]',run:'text portal',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"Check that the button has changed",trigger:'button:contains(Enable two-factor authentication)',run:()=>{}}]);tour.register('totportal_login_disabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text portal',},{content:'input password',trigger:'input#password',run:'text portal',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"check we're logged in",trigger:"h3:contains(Documents)",run:()=>{}}]);});